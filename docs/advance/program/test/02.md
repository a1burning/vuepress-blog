---
title: Jest
tags: 
  - å‰ç«¯å·¥ç¨‹åŒ–
  - å‰ç«¯æµ‹è¯•
  - Jest
date: 2021-02-24
prev: ./01.md
next: false
sidebarDepth: 5
---
Jestæ˜¯ä¸€ä¸ªä»¤äººæ„‰å¿«çš„ JavaScript æµ‹è¯•æ¡†æ¶ï¼Œä¸“æ³¨äºç®€æ´æ˜å¿«ã€‚ä»–é€‚ç”¨ä½†ä¸å±€é™äºä½¿ç”¨ä»¥ä¸‹æŠ€æœ¯çš„é¡¹ç›®ï¼šBabel, TypeScript, Node, React, Angular, Vue

[Jestå®˜ç½‘](https://jestjs.io/zh-Hans/)

## ç‰¹æ€§ï¼š
- é›¶é…ç½®
- å¿«ç…§
- æé«˜æ€§èƒ½
- ä¼˜ç§€çš„ api
- ä»£ç è¦†ç›–ç‡
- è½»æ¾æ¨¡æ‹ŸMock Functions
- ä¼˜ç§€çš„æŠ¥é”™ä¿¡æ¯

## å®‰è£…ä½¿ç”¨

1. åˆ›å»ºæ–‡ä»¶å¤¹ï¼Œåˆå§‹åŒ–npm `npm init -y`
2. å®‰è£…jest `npm i --save-dev jest`(å¦‚æœtaobaoæºå®‰è£…ä¸å¥½å°±ç”¨npmæº)
3. åˆ›å»ºmath.js

```js
function sum (x, y) {
  return x + y
}

function subtract (x, y) {
  return x - y
}

exports.sum = sum
exports.subtract = subtract
```

4. åˆ›å»ºmath.test.jsï¼ŒæŠŠæ–¹æ‰çš„ä»£ç æ‹¿è¿‡æ¥ï¼Œä¸è¿‡testå’Œexpectå°±æ˜¯jestçš„APIï¼Œè€Œä¸”testå’Œexpectä¸ç”¨å¼•ç”¨ï¼Œå…¨å±€çš„å˜é‡ï¼Œjestä¼šæ³¨å…¥ç›¸å…³çš„APIï¼Œç›´æ¥é›¶é…ç½®å°±å¯ä»¥ä½¿ç”¨ã€‚

```js
const { sum, subtract } = require('./math')

test('æµ‹è¯• sum', () => {
  expect(sum(1, 2)).toBe(3)
})

test('æµ‹è¯• subtract', () => {
  expect(subtract(2, 1)).toBe(1)
})
```

5. å‘½ä»¤è¡Œ`npx jest`è¿è¡Œæµ‹è¯•é€šè¿‡

```bash
PS E:\professer\Jest\3-5-jest> npx jest
 PASS  ./math.test.js (5.943 s)
  âˆš æµ‹è¯• sum (10 ms)
  âˆš æµ‹è¯• subtract (1 ms)

Test Suites: 1 passed, 1 total
Tests:       2 passed, 2 total
Snapshots:   0 total
Time:        27.459 s
```

6. å¦‚æœæŠŠå‡æ³•æ”¹æˆä¹˜æ³•è¿è¡Œï¼Œè¿™é‡Œå°±ä¼šæŠ¥é”™ï¼Œæç¤ºæ˜¯å“ªä¸ªåœ°æ–¹å‡ºé”™ã€‚

```bash
PS E:\professer\Jest\3-5-jest> npx jest
 FAIL  ./math.test.js
  âˆš æµ‹è¯• sum (3 ms)
  Ã— æµ‹è¯• subtract (6 ms)

  â— æµ‹è¯• subtract

    expect(received).toBe(expected) // Object.is equality

    Expected: 1
    Received: 2

      6 |
      7 | test('æµ‹è¯• subtract', () => {
    > 8 |   expect(subtract(2, 1)).toBe(1)
        |                          ^
      9 | })

      at Object.<anonymous> (math.test.js:8:26)

Test Suites: 1 failed, 1 total
Tests:       1 failed, 1 passed, 2 total
Snapshots:   0 total
Time:        3.926 s, estimated 6 s
```

7. è¿˜å¯ä»¥ä¿®æ”¹package.jsonï¼Œä¿®æ”¹scriptï¼Œç›´æ¥ç”¨`npm run test`å»è¿›è¡Œæµ‹è¯•ï¼Œè¿˜å¯ä»¥æ·»åŠ ä¸€ä¸ªç›‘å¬å‚æ•°`--watchAll`ï¼Œè‡ªåŠ¨æ‰§è¡Œæµ‹è¯•å‘½ä»¤

```js
"scripts": {
    "test": "jest",
    "test:watch": "jest --watchAll"
},
```

## é…ç½®æ–‡ä»¶
é¡¹ç›®é›¶é…ç½®å°±å¯ä»¥ä½¿ç”¨ï¼Œè¿˜å¯ä»¥é€šè¿‡é…ç½®æ–‡ä»¶ä¿®æ”¹é…ç½®

1. å‘½ä»¤è¡Œæ‰§è¡Œ`npx jest --init`ç”Ÿæˆé…ç½®æ–‡ä»¶ 

```bash
# æ˜¯å¦ç”¨tsçš„è¯­æ³•åˆ›å»ºé…ç½®æ–‡ä»¶
? Would you like to use Typescript for the configuration file? ... no
# é€‰æ‹©ç¯å¢ƒï¼Œjsdomå¯ä»¥å…¼å®¹node
? Choose the test environment that will be used for testing Â» - Use arrow-keys. Return to submit.
    node
>   jsdom (browser-like)
# ä½ æ˜¯å¦æƒ³æ·»åŠ æµ‹è¯•æŠ¥å‘Š
? Do you want Jest to add coverage reports? Â» (y/N) y
# ä½ æƒ³é€šè¿‡å“ªä¸ªproviderå»æä¾›ä»£ç è¦†ç›–ç‡
? Which provider should be used to instrument code for coverage? Â» - Use arrow-keys. Return to submit.
    v8
>   babel
# æ˜¯å¦åœ¨æµ‹è¯•ä¹‹å‰è‡ªåŠ¨æ¸…é™¤mockçš„æ•°æ®
? Automatically clear mock calls and instances between every test? Â» (y/N) y

# ç”Ÿæˆjest.config.jsæˆåŠŸ
ğŸ“  Configuration file created at E:\professer\Jest\3-5-jest\jest.config.js
```

2. ç”Ÿæˆçš„æ–‡æ¡£ä¸­æœ‰æ‰€æœ‰çš„é…ç½®é¡¹ï¼Œåœ¨é…ç½®æ–‡ä»¶ä¸­ä¹Ÿæœ‰æ‰€æœ‰çš„ï¼Œåªä¸è¿‡æ˜¯æ³¨é‡Šç€çš„ã€‚å¯ä»¥é€šè¿‡æŸ¥è¯¢ [å®˜æ–¹é…ç½®](https://jestjs.io/docs/zh-Hans/configuration) å»å­¦ä¹ ã€‚

## Jestç»“åˆä½¿ç”¨Babel

æˆ‘ä»¬é€šå¸¸å†™é¡¹ç›®ç”¨çš„æ˜¯ES Moduleï¼Œå¹¶ä¸æ˜¯CommonJSçš„æ–¹å¼ï¼Œè¿™ä¸ªæ—¶å€™éœ€è¦é€šè¿‡Babelå»åŠ è½½åŠŸèƒ½

1. æŠŠmath.jså’Œmath.test.jsè¿›è¡ŒES Moduleçš„è½¬æ¢

```js
// math.js
export function sum (x, y) {
  return x + y
}

export function subtract (x, y) {
  return x - y
}

```

```js
// math.test.js
import { sum, subtract } = './math'

test('æµ‹è¯• sum', () => {
  expect(sum(1, 2)).toBe(3)
})

test('æµ‹è¯• subtract', () => {
  expect(subtract(2, 1)).toBe(1)
})
```

è¿™ä¸ªæ—¶å€™ç›´æ¥è¿è¡Œä¼šæŠ¥é”™

2. è¿™ç§æƒ…å†µå°±è¦[ä½¿ç”¨babelå’Œbabel-jest](https://jestjs.io/docs/zh-Hans/getting-started#%E4%BD%BF%E7%94%A8-babel)ï¼Œbabel-jestå°±æ˜¯babelçš„é€‚é…å™¨ï¼Œjeståœ¨è¿è¡Œä¹‹å‰ä¼šè°ƒç”¨babelæŠŠES Moduleè½¬æ¢æˆCommonJSæ¨¡å—å†æ¥è¿è¡Œæµ‹è¯•ã€‚æ‰§è¡Œ `npm i babel-jest @babel/core @babel/preset-env -D`
3. æ ¹ç›®å½•åˆ›å»º`babel.config.js`ï¼Œå¹¶å†™

```js
// babel.config.js
module.exports = {
  presets: [['@babel/preset-env', {targets: {node: 'current'}}]],
};
```

4. è¿™æ ·å°±å¯ä»¥ç›´æ¥ä½¿ç”¨äº†`npm run test`

::: tip è¿è¡Œæµç¨‹  
npm run test è¿è¡Œçš„jestï¼Œjestå†…éƒ¨ä½¿ç”¨äº†babel-jestï¼Œå…¶å†…éƒ¨åˆä½¿ç”¨äº†@babel/coreï¼Œ æŠŠ es6 æ¨¡å—è½¬æ¢ä¸º commonjs æ¨¡å—ï¼Œå¹¶æŠŠè½¬æ¢ä¹‹åçš„æ¨¡å—ç»™ jest ä½¿ç”¨ï¼Œè¿è¡Œæµ‹è¯•ä»£ç 
::: 

## ä½¿ç”¨å…¶ä»–æ¨¡å—

é‡Œé¢éƒ½æœ‰ä½¿ç”¨äº†webpackï¼Œparcelï¼Œtypescriptçš„é…ç½®æ–¹å¼ï¼Œéƒ½å¯ä»¥è¿›è¡Œå…¼å®¹ã€‚

[æ›´å¤šé…ç½®](https://jestjs.io/docs/zh-Hans/getting-started#%E6%9B%B4%E5%A4%9A%E9%85%8D%E7%BD%AE)

## Jestä¸­å¸¸ç”¨çš„åŒ¹é…å™¨

ä¸»è¦çš„APIå°±æ˜¯åŒ¹é…å™¨ï¼ŒtoBeå°±æ˜¯ç›¸ç­‰åŒ¹é…å™¨

### ç®€å•åŒ¹é…å™¨


```js
test('two plus two is four', () => {
  expect(2 + 2).toBe(4);
});
```

toBeä½¿ç”¨ Object.is æ¥æµ‹è¯•ç²¾ç¡®ç›¸ç­‰ï¼Œå¦‚æœæ˜¯æ£€æŸ¥å¯¹è±¡ç±»å‹å°±ä¸å¥½ç”¨

```js
test('æµ‹è¯•å¯¹è±¡', () => {
  const obj = { foo: 'bar' }
  expect(obj).toBe({ foo: 'bar' })
})
```

```bash
 expect(received).toBe(expected) // Object.is equality

If it should pass with deep equality, replace "toBe" with "toStrictEqual"

Expected: {"foo": "bar"}
Received: serializes to the same string

  11 | test('æµ‹è¯•å¯¹è±¡', () => {
  12 |   const obj = { foo: 'bar' }
> 13 |   expect(obj).toBe({ foo: 'bar' })
     |               ^
  14 | })
```

è¿™é‡Œå»ºè®®ä½¿ç”¨toEqualä»£æ›¿ï¼ŒtoEqual é€’å½’æ£€æŸ¥å¯¹è±¡æˆ–æ•°ç»„çš„æ¯ä¸ªå­—æ®µï¼š

```js
test('æµ‹è¯•å¯¹è±¡', () => {
  const obj = { foo: 'bar' }
  expect(obj).toEqual({ foo: 'bar' })
})
```

### æœ‰æ•ˆæ€§åŒ¹é…

```js
test('null', () => {
  const n = null;
  expect(n).toBeNull();
  expect(n).toBeDefined();
  expect(n).not.toBeUndefined(); // ç­‰åŒäºtoBeDefined
  expect(n).not.toBeTruthy(); // ç­‰åŒäºtoBeFalsy
  expect(n).toBeFalsy();
});
```
### æ•°å­—åŒ¹é…

```js
test('æ•°å­—åŒ¹é… â€”â€” two plus two', () => {
  const value = 2 + 2;
  expect(value).toBeGreaterThan(3); // å¤§äº
  expect(value).toBeGreaterThanOrEqual(3.5); // å¤§äºç­‰äº
  expect(value).toBeLessThan(5); // å°äº
  expect(value).toBeLessThanOrEqual(4.5);  // å°äºç­‰äº

  // toBeå’ŒtoEqualä¹Ÿå¯ä»¥æµ‹è¯•æ•°å­—
  expect(value).toBe(4);  
  expect(value).toEqual(4);
});
```

æµ®ç‚¹æ•°çš„ç›¸ç­‰ï¼Œä½¿ç”¨ toBeCloseTo è€Œä¸æ˜¯ toEqualï¼Œå› ä¸ºä½ ä¸å¸Œæœ›æµ‹è¯•å–å†³äºä¸€ä¸ªå°å°çš„èˆå…¥è¯¯å·®ã€‚

```js
test('æ•°å­—åŒ¹é… â€”â€” ä¸¤ä¸ªæµ®ç‚¹æ•°å­—ç›¸åŠ ', () => {
  const value = 0.1 + 0.2;
  //expect(value).toBe(0.3);           è¿™å¥ä¼šæŠ¥é”™ï¼Œå› ä¸ºæµ®ç‚¹æ•°æœ‰èˆå…¥è¯¯å·®
  expect(value).toBeCloseTo(0.3); // è¿™å¥å¯ä»¥è¿è¡Œ
});
```

### å­—ç¬¦ä¸²åŒ¹é…
toMatch åé¢æ˜¯æ­£åˆ™è¡¨è¾¾å¼
```js
test('å­—ç¬¦ä¸²åŒ¹é… â€”â€” æ˜¯å¦ä¸å­˜åœ¨æŸä¸ªå­—ç¬¦', () => {
  expect('team').not.toMatch(/I/); // æ²¡æœ‰I
});

test('å­—ç¬¦ä¸²åŒ¹é… â€”â€” æ˜¯å¦å­˜åœ¨æŸä¸ªå­—ç¬¦', () => {
  expect('Christoph').toMatch(/stop/);  // æœ‰stop
});
```
### æ•°ç»„å’Œå¯éå†çš„å¯¹è±¡åŒ¹é…

é€šè¿‡ toContainæ¥æ£€æŸ¥ä¸€ä¸ªæ•°ç»„æˆ–å¯è¿­ä»£å¯¹è±¡æ˜¯å¦åŒ…å«æŸä¸ªç‰¹å®šé¡¹

```js
const shoppingList = [
  'diapers',
  'kleenex',
  'trash bags',
  'paper towels',
  'milk',
];

test('æ•°ç»„æˆ–å¯è¿­ä»£å¯¹è±¡ â€”â€” æ•°ç»„ä¸­æ˜¯å¦æœ‰ milk ', () => {
  expect(shoppingList).toContain('milk');
  expect(new Set(shoppingList)).toContain('milk');
});
```

### æµ‹è¯•å¼‚å¸¸åŒ¹é…

```js
function compileAndroidCode() {
  throw new Error('you are using the wrong JDK');
}

test('æµ‹è¯•å¼‚å¸¸åŒ¹é…', () => {
  // å‡½æ•°æŠ›å‡ºå¼‚å¸¸
  expect(() => compileAndroidCode()).toThrow();
  expect(() => compileAndroidCode()).toThrow(Error);

  // ä¼ å…¥å­—ç¬¦ä¸²ï¼Œå°±åˆ¤æ–­æ¶ˆæ¯çš„ä¿¡æ¯æ˜¯å¦ä¸€è‡´
  expect(() => compileAndroidCode()).toThrow('you are using the wrong JDK'); 
  // æ­£åˆ™ï¼ŒæŠ›å‡ºçš„æ¶ˆæ¯é‡Œé¢å­˜åœ¨JDK
  expect(() => compileAndroidCode()).toThrow(/JDK/);
});
```

### å…¶ä»–API

è¿˜æœ‰å¥½å¤šçš„ [åŒ¹é…å™¨](https://jestjs.io/docs/zh-Hans/expect)ï¼Œå¤šç”¨ç”¨å°±å¯ä»¥ç†Ÿæ‚‰ã€‚

## å¼‚æ­¥æµ‹è¯•

### æ¥å£å‡†å¤‡
1. å®‰è£…axios`npm i axios`
2. å»åœ¨å…ˆçš„æ¥å£æ¨¡æ‹Ÿ [JSONPlaceholder](http://jsonplaceholder.typicode.com/)ï¼Œæ‰¾åˆ°posts100ä¸ªæ–‡ç« åˆ—è¡¨çš„æ¥å£

### å›è°ƒæ–¹å¼
1. åˆ›å»ºasync-demo.jså®šä¹‰æ¥å£

```js
import axios from 'axios'

export function getPosts(callback) {
  axios.get('http://jsonplaceholder.typicode.com/posts')
    .then(res => {
      callback(res.data)
    })
}


getPosts(posts => {
  console.log(posts.length)
})
```

2. åˆ›å»ºasync-demo.test.jså†™æµ‹è¯•ä»£ç ï¼Œè®°å¾—ä¸€å®šè¦åŠ done

```js
import { getPosts } from './async-demo'

// å›è°ƒæ–¹å¼
test('post length is 100', (done) => {
  getPosts(posts => {
    expect(posts.length).toBe(100)
    // å¼‚æ­¥æ‰§è¡Œç»“æŸäº†
    done()
  })
})
```
### Promiseæ–¹å¼


1. åœ¨async-demo.jsä¸­è¿”å›promiseçš„å‡½æ•°

```js
export function getPosts2 () {
  return axios.get('http://jsonplaceholder.typicode.com/posts')
  .then(res => {
    return res.data
  })
}
```

2.åœ¨async-demo.test.jså†™æµ‹è¯•ä»£ç ï¼Œè¿™é‡Œä¸åŠ doneï¼Œä½†æ˜¯ä¹Ÿè¦è¿”å›promise


```js
import { getPosts, getPosts2 } from './async-demo'

// Promise
test('Promise posts 100', () => {
  // åŠ¡å¿…è¿”å› promise ï¼Œè¿™ä¸ªæ—¶å€™å°±ä¸éœ€è¦doneå‚æ•°äº†
  return getPosts2().then(posts => {
    expect(posts.length).toBe(100)
  })
})

```
### ä½¿ç”¨API .resolves/.rejects

1. åœ¨async-demo.jsä¸­è¿”å›æ–‡ç« çš„é•¿åº¦ï¼Œè®°å¾—è¿™é‡Œä¹Ÿå¿…é¡»ä½¿ç”¨promise

```js
export function getPosts3 () {
  return axios.get('http://jsonplaceholder.typicode.com/posts')
  .then(res => res.data.length)
}
```

2. åœ¨async-demo.test.jså†™æµ‹è¯•ä»£ç ï¼Œä½¿ç”¨è¿™ä¸ªä¸€å®šä¹Ÿå¿…é¡»æ˜¯promise

```js
import { getPosts, getPosts2, getPosts3 } from './async-demo'

// .resolves/.rejects
test('.resolves posts 100', () => {
  // åŠ¡å¿…è¿”å›promise
  return expect(getPosts3()).resolves.toBe(100)
})
```
### async/await

1. åœ¨async-demo.test.jså†™æµ‹è¯•ä»£ç ï¼Œæ¨èä½¿ç”¨è¿™ç§å½¢å¼ï¼Œæ›´åŠ è¯­ä¹‰åŒ–ã€‚

```js
// async/await
test('async/await posts 100', async () => {
  const count = await getPosts3()
  expect(count).toBe(100)
})
```

## é’©å­å‡½æ•°

### åŸºæœ¬ç”¨æ³•

#### å¤šæ¬¡é‡å¤è®¾ç½®
- **boforeEach**ï¼šæ¯æ¬¡æ‰§è¡Œå‰éƒ½æ‰§è¡Œè¿™ä¸ªå‡½æ•°
- **afterEach**ï¼šæ¯æ¬¡æ‰§è¡Œåéƒ½æ‰§è¡Œè¿™ä¸ªå‡½æ•°

1. åˆ›å»ºcounter.jsåœ¨é‡Œé¢å†™

```js
export class Counter {
  constructor () {
    this.count = 0
  }
  increment () {
    this.count++
  }
  decrement () {
    this.count--
  }
  incrementTwo () {
    this.count += 2
  }
  decrementTwo () {
    this.count -= 2
  }
}
```

2. åˆ›å»ºcounter.test.jsï¼Œé‡Œé¢å†™äº†ä¸‰ä¸ªå‡½æ•°æµ‹è¯•ï¼Œæ¯æ¬¡éƒ½è¦newä¸€ä¸ªCounterç±»ï¼Œè¿™æ ·æ¯”è¾ƒéº»çƒ¦ï¼Œå¯ä»¥ä½¿ç”¨beforeEaché’©å­å‡½æ•°

```js
import { Counter } from './counter'

test('Counter', () => {
  const counter = new Counter()
  expect(counter.count).toBe(0)
})

test('Counter decrement', () => {
  const counter = new Counter()
  counter.decrement()
  expect(counter.count).toBe(-1)
})

test('Counter increment', () => {
  const counter = new Counter()
  counter.increment()
  expect(counter.count).toBe(1)
})
```

3. å®šä¹‰ä¸€ä¸ªbeforeEachï¼Œæ¯ä¸ªæµ‹è¯•ç”¨ä¾‹ä¹‹å‰éƒ½ä¼šè‡ªåŠ¨è°ƒç”¨è¿™ä¸ªå‡½æ•°

```js
import { Counter } from './counter'

let counter = null

beforeEach(() => {
  console.log('beforeEach')
  counter = new Counter()
})

afterEach(() => {
  console.log('afterEach')
})

test('Counter', () => {
  expect(counter.count).toBe(0)
})

test('Counter decrement', () => {
  counter.decrement()
  expect(counter.count).toBe(-1)
})

test('Counter increment', () => {
  counter.increment()
  expect(counter.count).toBe(1)
})
```

::: tip é€šè¿‡æµ‹è¯•
PASS  ./async-demo.test.js (5.026 s)
 â— Console

   console.log
     beforeEach

  at `Object.<anonymous>` (counter.test.js:6:11)

   console.log
     afterEach

  at `Object.<anonymous>` (counter.test.js:11:11)
:::

#### ä¸€æ¬¡æ€§è®¾ç½®

```js
// æ‰€æœ‰æµ‹è¯•ç”¨ä¾‹æ‰§è¡Œä¹‹å‰æ‰§è¡Œ
beforeAll(() => {
  console.log('beforeAll')
})

// æ‰€æœ‰æµ‹è¯•ç”¨ä¾‹æ‰§è¡Œä¹‹åæ‰§è¡Œ
afterAll(() => {
  console.log('afterAll')
})
```
::: æ‰§è¡Œé¡ºåº
beforeAll > beforeEach > afterEach > afterAll
:::

### ä½œç”¨åŸŸ

1. åœ¨counter.test.jsä¸­å¯¹æµ‹è¯•è¿›è¡Œåˆ†ç»„

```js
describe('Counter group1', () => {
  // åŠ å‡1
  test('Counter decrement', () => {
    counter.decrement()
    expect(counter.count).toBe(-1)
  })
  
  test('Counter increment', () => {
    counter.increment()
    expect(counter.count).toBe(1)
  })
})

describe('Counter group2', () => {
  // åŠ å‡2
  test('Counter decrementTwo', () => {
    counter.decrementTwo()
    expect(counter.count).toBe(-2)
  })
  
  test('Counter incrementTwo', () => {
    counter.incrementTwo()
    expect(counter.count).toBe(2)
  })
})
```

2. å¦‚æœåœ¨ç»„å†…ï¼Œä¹Ÿå¯ä»¥æ·»åŠ  beforeEachï¼ŒafterEachï¼ŒbeforeAllï¼ŒafterAll ï¼Œå¦‚æœæ˜¯ç»„å†…çš„ï¼Œç»„å¤–çš„è¿˜æ˜¯ä¾ç„¶ä¼šæ‰§è¡Œï¼Œå½“å‰ç»„çš„å‡½æ•°åªä¼šå½“å‰æµ‹è¯•æ‰§è¡Œï¼Œgroup1çš„ä¸ä¼šæ‰§è¡Œåˆ°group2ä¸­

```js
describe('Counter group1', () => {

  // å½“å‰ç»„é‡Œé¢æ¯ä¸ªæµ‹è¯•ç”¨ä¾‹ä¹‹å‰éƒ½è°ƒç”¨
  beforeEach(() => {
    console.log('group1 before')
  })

  afterEach(() => {
    console.log('group1 after')
  })

  beforeAll(() => {
    console.log('group1 beforeAll')
  })

  afterAll(() => {
    console.log('group1 afterAll')
  })

  test('Counter decrement', () => {
    counter.decrement()
    expect(counter.count).toBe(-1)
  })
  
  test('Counter increment', () => {
    counter.increment()
    expect(counter.count).toBe(1)
  })
})

describe('Counter group2', () => {
  beforeEach(() => {
    console.log('group2 before')
  })

  afterEach(() => {
    console.log('group2 after')
  })
  
  beforeAll(() => {
    console.log('group1 beforeAll')
  })

  afterAll(() => {
    console.log('group1 afterAll')
  })

  test('Counter decrementTwo', () => {
    counter.decrementTwo()
    expect(counter.count).toBe(-2)
  })
  
  test('Counter incrementTwo', () => {
    counter.incrementTwo()
    expect(counter.count).toBe(2)
  })
})

```

::: tip æ‰§è¡Œé¡ºåº  
å…¨å±€çš„beforeAll > ç»„å†…çš„ beforeAll > å…¨å±€çš„ beforeEach > ç»„å†…çš„ beforeEach > ç»„å†…çš„afterEach > å…¨å±€çš„afterEach > ç»„å†…çš„afterAll > å…¨å±€çš„ afterAll
:::